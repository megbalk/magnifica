setwd("~/Documents/GitHub/bryozoa/magnifica/Scripts")
setwd("~/Documents/GitHub/bryozoa/magnifica")
#### LOAD DATA ----
bryo.images <- read.table("./Data/Steginoporella_magnifica_image_metadata_17Apr2023.csv",
header = TRUE,
sep = ";")
colnames(bryo.images)
head(bryo.images$Mag)
head(bryo.images$Magnification)
str(bryo.images$Magnification)
bryo.images.30 <- bryo.images[bryo.images$Magnification == 30,]
nrow(bryo.images.30)
nrow(bryo.images)
write.csv(bryo.images.30,
"./Data/filteredImages.csv",
row.names = FALSE)
colnames(bryo.images)
#### CREATE OLD FILE NAMES - DELETE LATER ####
bryo.images.30$SPECIMEN.NR <- str_remove(bryo.images.30$specimenNR, "^0+")
require(stringr)
#### CREATE OLD FILE NAMES - DELETE LATER ####
bryo.images.30$SPECIMEN.NR <- str_remove(bryo.images.30$specimenNR, "^0+")
bryo.images.30$SPECIMEN.NR
#### LOAD DATA ----
bryo.images <- read.table("./Data/Steginoporella_magnifica_image_metadata_17Apr2023.csv",
header = TRUE,
sep = ";")
#### CREATE OLD FILE NAMES - DELETE LATER ####
bryo.images.30$oldFileName <- str_remove(bryo.images.30$fileName, "^0+")
bryo.images.30$oldFileName
recon.df <- read.table("~/Desktop/image_merge_txt_usingfileName_DONE_17Apr2023.csv", header = TRUE, sep = ";")
colnames(recon.df)
setdiff(recon.df$newFileName, bryo.images$fileName)
#### LOAD PACKAGES ----
require(stringr)
require(dplyr)
require(ggplot2)
require(reshape2)
require(lmodel2)
require(tidyverse)
require(stringr)
#### LOAD DATA ----
bryo.images <- read.table("./Data/Steginoporella_magnifica_image_metadata_17Apr2023.csv",
header = TRUE,
sep = ";")
nrow(bryo.images) #1890
bryo.images.30 <- bryo.images[bryo.images$Magnification == 30,]
nrow(bryo.images.30) #1835
#### CREATE OLD FILE NAMES - DELETE LATER ####
recon.df <- read.table("~/Desktop/image_merge_txt_usingfileName_DONE_17Apr2023.csv",
header = TRUE, sep = ";")
setdiff(recon.df$newFileName, bryo.images$fileName)
setdiff(bryo.images$fileName, recon.df$newFileName)
#### LOAD DATA ----
bryo.images <- read.table("./Data/Steginoporella_magnifica_image_metadata_17Apr2023.csv",
header = TRUE,
sep = ";")
nrow(bryo.images) #1890
bryo.images.30 <- bryo.images[bryo.images$Magnification == 30,]
nrow(bryo.images.30) #1835
#### CREATE OLD FILE NAMES - DELETE LATER ####
recon.df <- read.table("~/Desktop/image_merge_txt_usingfileName_DONE_17Apr2023.csv",
header = TRUE, sep = ";")
setdiff(recon.df$newFileName, bryo.images$fileName)
#[1] 000005i_FL_1_15v_x35_BSE [2] 000005i_FL_2_15v_x30_BSE [3] 0000100_CV_1_15v_x30_BSE
setdiff(bryo.images$fileName, recon.df$newFileName)
colnames(recon.df$newFileName)
colnames(recon.df)
##### add in full file name #####
bryo.images.30$fileName.tif <- paste0(bryo.images.30$fileName, ".tif")
bryo.images.30$fileName.tif
colnames(recon.df)
##### combine files to get path #####
merge(bryo.images.30, recon.df,
by.x = "fileName", by.y = "newFileName",
all.x = TRUE, all.y = FALSE)
##### combine files to get path #####
bryo.images.path <- merge(bryo.images.30, recon.df,
by.x = "fileName", by.y = "newFileName",
all.x = TRUE, all.y = FALSE)
nrow(bryo.images.path)
View(bryo.images.path)
colnames(recon.df)
##### combine files to get path #####
recon.df.path <- recon.df.path[, c("newFileName", "path.tif")]
##### combine files to get path #####
recon.df.path <- recon.df[, c("newFileName", "path.tif")]
recon.df.path
head(recon.df.path)
bryo.images.path <- merge(bryo.images.30, recon.df.path,
by.x = "fileName", by.y = "newFileName",
all.x = TRUE, all.y = FALSE)
nrow(bryo.images.path)
View(bryo.images.path)
write.csv(bryo.images.path,
"./Data/filteredImages.csv",
row.names = FALSE)
